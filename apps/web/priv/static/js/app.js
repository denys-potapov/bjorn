function uc(n,t){if(0==n.byteLength)return t;if(0==t.byteLength)return n;var e=new Uint8Array(n.byteLength+t.byteLength);return e.set(n,0),e.set(t,n.byteLength),e}function ar(n){return n.v instanceof ArrayBuffer?new Uint8Array(n.v):n.v instanceof Uint8Array?n.v:Array.isArray(n.v)?new Uint8Array(n.v):new Uint8Array(utf8_toByteArray(n.v).v)}function fl(n){return n.reduce(function(n,t){return uc(n,t instanceof Uint8Array?t:Array.isArray(t)?fl(t):new Uint8Array([t]))},new Uint8Array)}function atom(n){return{t:100,v:utf8_toByteArray(n).v}}function bin(n){return{t:109,v:n instanceof ArrayBuffer?new Uint8Array(n):n instanceof Uint8Array?n:utf8_toByteArray(n).v}}function tuple(){return{t:104,v:Array.apply(null,arguments)}}function list(){return{t:108,v:Array.apply(null,arguments)}}function number(n){return{t:98,v:n}}function enc(n){return fl([131,ein(n)])}function ein(o){return Array.isArray(o)?en_108({t:108,v:o}):eval("en_"+o.t)(o)}function en_undefined(n){return[106]}function en_98(n){return[98,n.v>>>24,n.v>>>16&255,n.v>>>8&255,255&n.v]}function en_97(n){return[97,n.v]}function en_106(n){return[106]}function en_100(n){return[100,n.v.length>>>8,255&n.v.length,ar(n)]}function en_107(n){return[107,n.v.length>>>8,255&n.v.length,ar(n)]}function en_104(n){for(var t=n.v.length,e=[],r=0;r<t;r++)e[r]=ein(n.v[r]);return[104,t,e]}function en_109(n){var t=n.v instanceof ArrayBuffer?n.v.byteLength:n.v.length;return[109,t>>>24,t>>>16&255,t>>>8&255,255&t,ar(n)]}function en_108(n){for(var t=n.v.length,e=[],r=0;r<t;r++)e.push(ein(n.v[r]));return 0==n.v.length?[106]:[108,t>>>24,t>>>16&255,t>>>8&255,255&t,e,106]}function nop(n){return[]}function big(n){for(var t=1==n?sx.getUint8(ix++):sx.getInt32((a=ix,ix+=4,a)),e=0,r=sx.getUint8(ix++),o=t;o-- >0;)e=256*e+sx.getUint8(ix+o);return ix+=t,e*(0==r?1:-1)}function int(n){return 1==n?sx.getUint8(ix++):sx.getInt32((a=ix,ix+=4,a))}function dec(n){if(sx=new DataView(n),ix=0,131!==sx.getUint8(ix++))throw"BERT?";return din()}function str(n){var t=2==n?sx.getUint16(ix):sx.getInt32(ix);ix+=n;var e=sx.buffer.slice(ix,ix+=t);return 2==n?utf8_dec(e):e}function run(n){var t=1==n?sx.getUint8(ix):sx.getUint32(ix),e=[];ix+=n;for(var r=0;r<t;r++)e.push(din());return 4==n&&ix++,e}function din(){var n,t=sx.getUint8(ix++);switch(t){case 97:n=[int,1];break;case 98:n=[int,4];break;case 100:n=[str,2];break;case 110:n=[big,1];break;case 111:n=[big,4];break;case 104:n=[run,1];break;case 107:n=[str,2];break;case 108:n=[run,4];break;case 109:n=[str,4];break;default:n=[nop,0]}return{t:t,v:n[0](n[1])}}function querySourceRaw(n){var t,e=document.getElementById(n);if(!e)return"";switch(e.tagName){case"FIELDSET":t=document.querySelector('[id="'+n+'"] :checked'),t=t?t.value:"";break;case"INPUT":switch(e.getAttribute("type")){case"radio":case"checkbox":t=e.checked?e.value:"";break;case"date":t=new Date(Date.parse(e.value))||"";break;case"calendar":t=pickers[e.id]._d||"";break;default:var r=e.contentEditable;t=r&&"true"===r?e.innerHTML:e.value}break;default:var r=e.contentEditable;t=r&&"true"===r?e.innerHTML:e.value}return t}function querySource(n){var t=querySourceRaw(n);return t instanceof Date?tuple(number(t.getFullYear()),number(t.getMonth()+1),number(t.getDate())):utf8_toByteArray(t)}function nop(){}function bullet(n){return $conn.url=n,$conn}function xport(){return!(maxReconnects<=ct)&&transports[ct++%transports.length]}function reconnect(){setTimeout(function(){connect()},reconnectDelay)}function next(){return $conn.port=xport(),!!$conn.port&&connect()}function connect(){return $conn.port.channel=$conn.port.creator($conn.url),$conn.port.channel?($conn.port.channel.onmessage=function(n){$conn.onmessage(n)},$conn.port.channel.onopen=function(){$conn.port.heart&&(heartbeat=setInterval(function(){$conn.port.onheartbeat()},$conn.port.interval)),$conn.onopen(),$conn.onconnect()},$conn.port.channel.onclose=function(){$conn.onclose(),clearInterval(heartbeat),reconnect()},$conn):next()}function N2O_start(){ws=new bullet(protocol+host+(""==port?"":":"+port)+"/ws"+querystring),ws.onmessage=function(n){for(var t=0;t<protos.length;t++)if(p=protos[t],"ok"==p.on(n,p["do"]).status)return},ws.onopen=function(){active||(console.log("Connect"),ws.send("N2O,"+transition.pid),active=!0)},ws.onclose=function(){active=!1,console.log("Disconnect")},next()}function qi(n){return document.getElementById(n)}function qs(n){return document.querySelector(n)}function qn(n){return document.createElement(n)}function is(n,t,e){return 106!=n.t&&(n.v.length===t&&n.v[0].v===e)}function co(n){return match=document.cookie.match(new RegExp(n+"=([^;]+)")),match?match[1]:void 0}function utf8_toByteArray(n){var t=[];if(void 0!==n&&null!==n)for(var e=0;e<n.length;e++)if(n.charCodeAt(e)<=127)t.push(n.charCodeAt(e));else for(var r=encodeURIComponent(n.charAt(e)).substr(1).split("%"),o=0;o<r.length;o++)t.push(parseInt(r[o],16));return{t:107,v:t}}function utf8_dec(n){n instanceof ArrayBuffer||(n=new Uint8Array(utf8_toByteArray(n).v).buffer);for(var t=new DataView(n),e=c=c1=c2=0,r=String.fromCharCode,o=[];e<t.byteLength;)c=t.getUint8(e),c<128?(o+=r(c),e++):c>191&&c<224?(c2=t.getUint8(e+1),o+=r((31&c)<<6|63&c2),e+=2):(c2=t.getUint8(e+1),c3=t.getUint8(e+2),o+=r((15&c)<<12|(63&c2)<<6|63&c3),e+=3);return o}function validateSources(n){return n.reduce(function(n,t){var e=new CustomEvent("validation");e.initCustomEvent("validation",!0,!0,querySourceRaw(t));var r=qi(t),o=r&&r.validation,a=!o||o&&r.dispatchEvent(e);return console.log(a),r&&(r.style.background=a?"":"pink"),a&&n},!0)}function closeHelp(){qi("help-callout").style.display="none"}function clearAltForm(){qi("alt_text").value="",qi("alt_vote").value=0}function onSliderChange(n){n.classList.remove("positive"),n.classList.remove("negative");var t=qi(n.id+"text");n.value>0&&(n.classList.add("positive"),t.innerHTML="&#65291;"+n.value),n.value<0&&(n.classList.add("negative"),t.innerHTML="&mdash;"+-n.value),0==n.value&&(t.innerHTML="&nbsp;")}function voteSubmit(){for(var n=document.querySelectorAll('#alts input[id^="vote"]'),t=[],e=0;e<n.length;e++)t.push([n[e].id.substring(4),n[e].value]);return vote({title:qi("title")?qi("title").value:"",name:qi("name").value,votes:t}),console.log(t),!1}function statusChangeCallback(n){console.log("statusChangeCallback"),"connected"===n.status?fb_login(n.authResponse.accessToken):"not_authorized"===n.status?alert("Please log into this app."):alert("Please log into Facebook.")}function onLoginClick(){FB.login(function(n){statusChangeCallback(n)},{scope:"public_profile"})}try{module.exports={dec:dec,enc:enc}}catch(e){}var $client={};$client.on=function(n,t){try{msg=JSON.parse(n.data),debug&&console.log(JSON.stringify(msg)),"function"==typeof t&&msg&&t(msg);for(var e=0;e<$bert.protos.length;e++)if(p=$bert.protos[e],"ok"==p.on(msg,p["do"]).status)return{status:"ok"}}catch(r){return{status:"error"}}return{status:"ok"}},function(){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame}(),$ws={heart:!0,interval:4e3,creator:function(n){return!!window.WebSocket&&new window.WebSocket(n)},onheartbeat:function(){this.channel.send("PING")}},$conn={onopen:nop,onmessage:nop,onclose:nop,onconnect:nop,send:function(n){this.port.channel&&this.port.channel.send(n)},close:function(){this.port.channel&&this.port.channel.close()}},ct=0,transports=[$ws],heartbeat=null,reconnectDelay=1e3,maxReconnects=100;var active=!1,debug=!1,session="site-sid",protocol="https:"==window.location.protocol?"wss://":"ws://",querystring=window.location.pathname+window.location.search,host=null==transition.host?window.location.hostname:transition.host,port=null==transition.port?window.location.port:transition.port,$io={};$io.on=function onio(r,cb){if(!is(r,3,"io"))return{status:""};try{return eval(utf8_dec(r.v[1].v)),"function"==typeof cb&&cb(r),{status:"ok"}}catch(e){return console.log(e),{status:""}}};var $file={};$file.on=function(n,t){return is(n,10,"ftp")?("function"==typeof t&&t(n),{status:"ok"}):{status:""}};var $bin={};$bin.on=function(n,t){return is(n,2,"bin")?("function"==typeof t&&t(n),{status:"ok"}):{status:""}};var $bert={};$bert.protos=[$io,$bin,$file],$bert.on=function(n,t){if(Blob.prototype.isPrototypeOf(n.data)&&(n.data.length>0||n.data.size>0)){var e=new FileReader;return e.addEventListener("loadend",function(){try{erlang=dec(e.result),debug&&console.log(JSON.stringify(erlang)),"function"==typeof t&&t(erlang);for(var n=0;n<$bert.protos.length;n++)if(p=$bert.protos[n],"ok"==p.on(erlang,p["do"]).status)return}catch(r){console.log(r)}}),e.readAsArrayBuffer(n.data),{status:"ok"}}return{status:"error",desc:"data"}};var protos=[$bert];try{module.exports={dec:utf8_dec,enc:utf8_toByteArray}}catch(e){}!function(){function n(n,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),e}n.prototype=window.Event.prototype,window.CustomEvent=n}(),protos=[$client,$bert],N2O_start();